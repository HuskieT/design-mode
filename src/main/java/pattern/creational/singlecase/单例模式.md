# 单例模式

## 1 懒汉模式单例  多线程下不安全

synchronized 用在static前 表示锁整个类的class文件

synchronized 用在方法中没有static 表示锁的是堆内存生成的对象

## 2 饿汉模式单例  多线程下不安全  


## 类被立即初始化

1 A类实例被创建
2 A类的静态方法被调用
3 A类中声明了一个静态成员 被赋值
4 A类中声明的静态成员被使用  且这个成员不是一个常量成员

## 4 反射防御

针对 类加载就创建类对象 有效 （例如：饿汉模式  静态内部类 ）

针对不是类加载就创建类对象的情况（例如： 懒汉模式  双检测 （使用时才创建对象））要看具体执行情况

先反射创建对象  后调用单例方法创建单例   会出现 多例情况  （反射可以修改 构造器的权限  修改属性值）

先用单例方法创建单例 后反射创建对象   一直是单例


